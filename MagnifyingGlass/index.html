<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style type="text/css">
		body,div,img{margin: 0;padding: 0}
		#main{width: 300px;height: 187px;margin:50px auto;position: relative;}
		#small{width:100%;border:1px solid #666;}
		#big{width:100%;height:187px;border:1px solid #666;overflow: hidden;position: absolute;left: 320px;top:0;}
		#mark{width:50px;height: 50px;background-color: #ccc;position: absolute;left: 0;top:0;opacity: 0.5}
		#big,#mark{display: none}
	</style>
</head>
<body>
	<div id="main">
		<div id="small">

			<img src="img/ktm_small.jpg">

			<div id="mark"></div>
		</div>
		<div id="big">
			<img src="img/ktm_big.jpg">
		</div>
	</div>
	<script type="text/javascript">

		var small = document.getElementById('small');

		var big = document.getElementById('big');

		var mark = document.getElementById('mark');


		small.onmouseover = function(){
			big.style.display = 'block';
			mark.style.display = 'block';
		}

		small.onmouseout = function(){
			big.style.display = 'none';
			mark.style.display = 'none';
		}


		small.onmousemove = function(ev){
			var x = ev.clientX - this.parentNode.offsetLeft - mark.offsetWidth/2;
			var y = ev.clientY - this.parentNode.offsetTop -mark.offsetHeight/2;

			if(x<=0){
				x = 0;
			}
			if(y<=0){
				y = 0;
			}
			if(x >= small.offsetWidth - mark.offsetWidth){
				x = small.offsetWidth - mark.offsetWidth;
			}
			if(y >= small.offsetHeight - mark.offsetHeight){
				y = small.offsetHeight - mark.offsetHeight;
			}

			mark.style.left = x +'px';
			mark.style.top = y +'px';

			var bigImg = big.getElementsByTagName('img')[0];


			var bigLeft = mark.offsetLeft/(small.offsetWidth-mark.offsetWidth) * (bigImg.offsetWidth - big.offsetWidth);
			var bigTop = mark.offsetTop/(small.offsetHeight-mark.offsetHeight) * (bigImg.offsetHeight - big.offsetHeight);
	
			bigImg.style.position = 'absolute';
			bigImg.style.left = -bigLeft+'px';
			bigImg.style.top = -bigTop+'px';
		}

	</script>
</body>
</html>
